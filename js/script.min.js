(function(){var c=$(".change-topic select"),g=$(".loader"),d=false,a=$(".desktop-only input.background-visible");Hyphenator.run();vex.defaultOptions.className="vex-theme-top";$(document).ready(function(){setTimeout(function(){window.scrollTo(0,1)},0)});if(IE||navigator.standalone){$(".posts a").attr("target","_self")}function f(k,j,l){vex.dialog.open({message:"Please enter an RSS feed URL. "+k,input:"<input type='url' name='rssurl' placeholder='RSS URL' required='required'>",callback:function(m){if(m.rssurl&&typeof m.rssurl==="string"){h("http://tji.eu5.org/?topic="+encodeURIComponent(m.rssurl)+"&prevtopic="+currentTopic)}else{if(l){e(l)}else{c.val(currentTopic)}}},afterOpen:function(){if(IE){$(".vex-content input").blur()}else{$(".vex-content input").first().focus()}}});c.val(j)}function e(j){$.get("remove_feed.php",function(){if(j){h("http://tji.eu5.org/?topic="+j)}else{h("http://tji.eu5.org")}})}function b(){if(navigator.standalone){g.show()}}function h(j){window.location.href=j;b()}function i(k,j){vex.dialog.buttons.YES.text=k;vex.dialog.buttons.NO.text=j}c.on("change",function(){if(c.val()==="custom"){f("<span class='warning-text'><b>Warning:</b> this sets a cookie.</span>",currentTopic)}else{h("http://tji.eu5.org/?"+$(".change-topic").serialize()+"&prevtopic="+currentTopic)}});if(invalidFeed){currentTopic=prevTopic;f("<span class='error-text'><b>Error:</b> you have entered an invalid feed.</span>",prevTopic,prevTopic)}$(".rssEdit").on("click",function(){vex.dialog.open({message:"Please enter a new RSS feed.",input:"<input type='url' name='rssurl' placeholder='"+decodeURIComponent(currentTopic)+"' required='required'>",callback:function(j){if(j.rssurl&&typeof j.rssurl==="string"){h("http://tji.eu5.org/?topic="+encodeURIComponent(j.rssurl)+"&prevtopic="+currentTopic)}},afterOpen:function(){if(IE){$(".vex-content input").blur()}else{$(".vex-content input").first().focus()}}})});$(".rssRemove").on("click",function(){i("Yes","No");vex.dialog.confirm({message:"Are you sure you want to remove this RSS feed? <span class='warning-text'>This action is not reversable.</span>",className:"vex-rss-remove vex-theme-top",callback:function(j){i("OK","Cancel");if(j){e()}}})});$(".search-news .close").on("click",function(){$(this).parent().find("input").val("").get(0).focus()});$(".settings-control").on("click",function(){var j=$(this);j.next(".settings").slideToggle();j.find(".chevron").fadeOut(function(){var k=j.find(".chevron").empty();if(d){k.append("&#x25BC;").fadeIn()}else{k.append("&#x25B2;").fadeIn()}d=!d})});$("a").on("click",function(j){if(navigator.standalone){j.preventDefault();h($(this).attr("href"))}});a.on("change",function(){var k="Are you sure you want to turn the background image ",j=$(".desktop-only input.background-visible").is(":checked");if(j){k+="on?"}else{k+="off?"}i("Yes","No");vex.dialog.confirm({message:k,callback:function(l){i("OK","Cancel");if(l){h("http://tji.eu5.org/?topic="+currentTopic+"&prevtopic="+prevTopic+"&backgroundvisible="+(j?"background-visible":"background-invisible"))}else{if(j){a.val([])}else{a.val(["bg-check"])}}}})})})();